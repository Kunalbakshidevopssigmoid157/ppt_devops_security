FROM ubuntu:latest


RUN apt-get update && apt-get upgrade -y && \
    apt-get install -y python3-pip 
    
RUN apt-get install -y openssl

RUN openssl genrsa -out private.key 2048

# Additional steps for your Docker image configuration

RUN useradd -m myuser
USER myuser

RUN mkdir /app

COPY ./requirements.txt /app/requirements.txt
RUN pip install -r /app/requirements.txt

COPY ./College-ERP /app/

RUN chmod 600 /app/private.key

ENV DOCKER_CONTENT_TRUST=1

WORKDIR /app

EXPOSE 8000

CMD ["python3", "manage.py", "runserver"]